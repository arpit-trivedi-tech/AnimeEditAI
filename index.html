<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AnimeEditAI - Fixed</title>
  <style>
    body { font-family: Arial; background: #121212; color: white; text-align: center; padding: 20px; }
    canvas { border: 2px solid #fff; margin-top: 20px; }
    button, select { padding: 10px; margin: 10px; font-size: 16px; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>AnimeEditAI</h1>
  <select id="quoteSelect">
    <option value="A lesson without pain is meaningless – Edward Elric">Edward Elric</option>
    <option value="Power comes in response to a need, not a desire – Goku">Goku</option>
    <option value="Hard work is worthless for those that don’t believe in themselves – Naruto">Naruto</option>
  </select>
  <br>
  <button onclick="generate()">Generate Edit</button>
  <button onclick="download()">Download Image</button>
  <br><br>
  <canvas id="canvas" width="720" height="1280"></canvas>
  <p style="color: gray;">If nothing appears, please upload a valid <b>background.jpg</b> to this repo.</p>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const watermark = "@Mr.Arpit_trivedi";

    async function generate() {
      const quote = document.getElementById("quoteSelect").value;
      const img = new Image();
      img.src = "background.jpg?" + new Date().getTime(); // avoid cache
      img.onload = () => {
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";
        ctx.font = "28px Arial";
        ctx.fillText(quote, 30, canvas.height - 100);
        ctx.font = "20px Arial";
        ctx.fillText(watermark, 30, canvas.height - 40);
        try {
          const utterance = new SpeechSynthesisUtterance(quote);
          utterance.lang = "en-US";
          speechSynthesis.speak(utterance);
        } catch (err) {
          alert("Speech failed: " + err.message);
        }
      };
      img.onerror = () => {
        alert("⚠️ Error loading background.jpg. Make sure it's uploaded in your GitHub repo.");
      };
    }

    function download() {
      const link = document.createElement('a');
      link.download = 'anime_edit.png';
      link.href = canvas.toDataURL();
      link.click();
    }
  </script>
</body>
</html>
